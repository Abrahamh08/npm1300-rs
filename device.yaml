config:
  register_address_type: u16
  command_address_type: u16
  buffer_address_type: u16
  defmt_feature: defmt-03

BUCK:
  type: block
  description: BUCK registers
  address_offset: 0x0400
  objects:
    BUCKENASET:
      type: command
      description: BUCK enable pulse
      address: 0x00
      repeat:
        count: 2
        stride: 2
      size_bits_in: 8
      fields_in:
        TASKBUCKENASET:
          base: uint
          start: 0
          end: 1
          description: Request to enable BUCK
          conversion:
            name: TASKBUCKENASET
            NOEFFECT:
              value: 0
              description: No effect
            SET:
              value: 1
              description: BUCK enable request set
    BUCKENACLR:
      type: command
      description: BUCK disable pulse
      address: 0x01
      size_bits_in: 8
      repeat:
        count: 2
        stride: 2
      fields_in:
        TASKBUCKENACLR:
          base: uint
          start: 0
          end: 1
          description: Request to disable BUCK
          conversion:
            name: TASKBUCKENACLR
            NOEFFECT:
              value: 0
              description: No effect
            SET:
              value: 1
              description: BUCK enable request clear
    BUCKPWMSET:
      type: command
      description: BUCK PWM mode enable pulse
      address: 0x04
      repeat:
        count: 2
        stride: 2
      size_bits_in: 8
      fields_in:
        TASKBUCKPWMSET:
          base: uint
          start: 0
          end: 1
          description: Request for BUCK to enter forced PWM mode
          conversion:
            name: TASKBUCKPWMSET
            NOEFFECT:
              value: 0
              description: No effect
            SET:
              value: 1
              description: BUCK forced PWM request
    BUCKPWMCLR:
      type: command
      description: BUCK PWM mode disable pulse
      address: 0x05
      repeat:
        count: 2
        stride: 2
      size_bits_in: 8
      fields_in:
        TASKBUCKPWMCLR:
          base: uint
          start: 0
          end: 1
          description: Request for BUCK to leave forced PWM mode and return to auto mode
          conversion:
            name: TASKBUCKPWMCLR
            NOEFFECT:
              value: 0
              description: No effect
            SET:
              value: 1
              description: BUCK auto mode request
    BUCK1NORMVOUT:
      type: register
      description: BUCK1 output voltage normal mode
      address: 0x08
      size_bits: 8
      reset_value: 0x02
      fields:
        value:
          base: uint
          start: 0
          end: 8
          try_conversion: crate::buck::BuckVoltage
    BUCK1RETVOUT:
      type: register
      description: BUCK1 output voltage retention mode
      address: 0x09
      size_bits: 8
      reset_value: 0x02
      fields:
        value:
          base: uint
          start: 0
          end: 8
          try_conversion: crate::buck::BuckVoltage
    BUCK2NORMVOUT:
      type: register
      description: BUCK2 output voltage normal mode
      address: 0x0A
      size_bits: 8
      reset_value: 0x08
      fields:
        value:
          base: uint
          start: 0
          end: 8
          try_conversion: crate::buck::BuckVoltage
    BUCK2RETVOUT:
      type: register
      description: BUCK2 output voltage retention mode
      address: 0x0B
      size_bits: 8
      reset_value: 0x08
      fields:
        value:
          base: uint
          start: 0
          end: 8
          try_conversion: crate::buck::BuckVoltage
    BUCKENCTRL:
      type: register
      description: BUCK Enable GPIO Select
      address: 0x0C
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCK1ENGPISEL:
          base: uint
          start: 0
          end: 3
          description: Select which GPI controls BUCK1_enable
          try_conversion: crate::gpios::Gpio
        BUCK2ENGPISEL:
          base: uint
          start: 3
          end: 6
          description: Select which GPI controls BUCK2_enable
          try_conversion: crate::gpios::Gpio
        BUCK1ENGPIINV:
          base: uint
          start: 6
          end: 7
          description: Invert the sense of the selected GPIO
          try_conversion: crate::gpios::GpioPolarity
        BUCK2ENGPIINV:
          base: uint
          start: 7
          end: 8
          description: Invert the sense of the selected GPIO
          try_conversion: crate::gpios::GpioPolarity
    BUCKVRETCTRL:
      type: register
      description: BUCK Retention Voltage select
      address: 0x0D
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCK1VRETGPISEL:
          base: uint
          start: 0
          end: 3
          description: Select which GPI controls BUCK1_retention voltage sel
          try_conversion: crate::gpios::Gpio
        BUCK2VRETGPISEL:
          base: uint
          start: 3
          end: 6
          description: Select which GPI controls BUCK2_retention voltage sel
          try_conversion: crate::gpios::Gpio
        BUCK1VRETGPIINV:
          base: uint
          start: 6
          end: 7
          description: Invert the sense of the selected GPIO
          try_conversion: crate::gpios::GpioPolarity
        BUCK2VRETGPIINV:
          base: uint
          start: 7
          end: 8
          description: Invert the sense of the selected GPIO
          try_conversion: crate::gpios::GpioPolarity
    BUCKPWMCTRL:
      type: register
      description: BUCK Forced PWM mode GPIO select
      address: 0x0E
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCK1PWMGPISEL:
          base: uint
          start: 0
          end: 3
          description: Select which GPI controls BUCK1 force PWM
          try_conversion: crate::gpios::Gpio
        BUCK2PWMGPISEL:
          base: uint
          start: 3
          end: 6
          description: Select which GPI controls BUCK2 force PWM
          try_conversion: crate::gpios::Gpio
        BUCK1PWMGPIINV:
          base: uint
          start: 6
          end: 7
          description: Invert the sense of the selected GPIO
          try_conversion: crate::gpios::GpioPolarity
        BUCK2PWMGPIINV:
          base: uint
          start: 7
          end: 8
          description: Invert the sense of the selected GPIO
          try_conversion: crate::gpios::GpioPolarity
    BUCKSWCTRLSEL:
      type: register
      description: BUCK software control select
      address: 0x0F
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCK1SWCTRLSEL:
          base: uint
          start: 0
          end: 1
          description: BUCK1 software control select
          conversion:
            name: BUCK1SWCTRLSEL
            VSETANDSWCTRL:
              value: default
              description: Allow VSET pins to set VOUT
            SWCTRL:
              value: 1
              description: Allow SW to override VSET pin
        BUCK2SWCTRLSEL:
          base: uint
          start: 1
          end: 2
          description: BUCK2 software control select
          conversion:
            name: BUCK2SWCTRLSEL
            VSETANDSWCTRL:
              value: default
              description: Allow VSET pins to set VOUT
            SWCTRL:
              value: 1
              description: Allow SW to override VSET pin
    BUCKVOUTSTATUS:
      type: register
      description: BUCK VOUT Status register. Lets software read the Vout value in case its driven by the FSM
      access: ReadOnly
      address: 0x10
      repeat:
        count: 2
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCKVOUTSTATUS:
          base: uint
          start: 0
          end: 5
          description: Buck output voltage (set by FSM)
          access: ReadOnly
          try_conversion: crate::buck::BuckVoltage
    BUCKCTRL0:
      type: register
      description: BUCK auto PFM to PWM control select
      address: 0x15
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCK1AUTOCTRLSEL:
          base: uint
          start: 0
          end: 1
          description: Controls the mode selection for BUCK1 regulator
          conversion:
            name: BUCK1AUTOCTRLSEL
            AUTO:
              value: default
              description: Select auto switching between PFM and PWM
            PFM:
              value: 1
              description: Select PFM mode only
        BUCK2AUTOCTRLSEL:
          base: uint
          start: 1
          end: 2
          description: Controls the mode selection for BUCK2 regulator
          conversion:
            name: BUCK2AUTOCTRLSEL
            AUTO:
              value: default
              description: Select auto switching between PFM and PWM
            PFM:
              value: 1
              description: Select PFM mode only
        BUCK1ENPULLDOWN:
          base: uint
          start: 2
          end: 3
          description: Enables or disables the pull-down resistor on the BUCK1 enable pin.
          conversion:
            name: BUCK1ENPULLDOWN
            LOW:
              value: default
              description: BUCK1 pull-down disabled
            HIGH:
              value: 1
              description: BUCK1 pull-down enabled
        BUCK2ENPULLDOWN:
          base: uint
          start: 3
          end: 4
          description: Enables or disables the pull-down resistor on the BUCK2 enable pin.
          conversion:
            name: BUCK2ENPULLDOWN
            LOW:
              value: default
              description: BUCK2 pull-down disabled
            HIGH:
              value: 1
              description: BUCK2 pull-down enabled
    BUCKSTATUS:
      type: register
      description: BUCK status register
      access: RO
      address: 0x34
      size_bits: 8
      reset_value: 0x00
      fields:
        BUCK1MODE:
          base: uint
          start: 0
          end: 2
          description: BUCK1 Mode status
          access: ReadOnly
          conversion:
            name: BUCK1MODE
            AUTOMODE:
              value: default
              description: Auto mode
            PFMMODE:
              value: 1
              description: PFM mode
            PWMMODE:
              value: 2
              description: Forced PWM mode
        BUCK1PWRGOOD:
          base: uint
          start: 2
          end: 3
          description: BUCK1 Power Good status
          access: ReadOnly
          conversion:
            name: BUCK1PWRGOOD
            BUCKDISABLED:
              value: 0
              description: BUCK powered off
            BUCKPOWERED:
              value: 1
              description: BUCK powered on
        BUCK1PWMOK:
          base: uint
          start: 3
          end: 4
          description: BUCK1 PWM OK status
          access: ReadOnly
          conversion:
            name: BUCK1PWMOK
            PWMMODEDISABLED:
              value: 0
              description: PWM mode disabled
            PWMMODEENABLED:
              value: 1
              description: PWM mode enabled
        BUCK2MODE:
          base: uint
          start: 4
          end: 6
          description: BUCK2 Mode status
          access: ReadOnly
          conversion:
            name: BUCK2MODE
            AUTOMODE:
              value: default
              description: Auto mode
            PFMMODE:
              value: 1
              description: PFM mode
            PWMMODE:
              value: 2
              description: Forced PWM mode
        BUCK2PWRGOOD:
          base: uint
          start: 6
          end: 7
          description: BUCK2 Power Good status
          access: ReadOnly
          conversion:
            name: BUCK2PWRGOOD
            BUCKDISABLED:
              value: 0
              description: BUCK powered off
            BUCKPOWERED:
              value: 1
              description: BUCK powered on
        BUCK2PWMOK:
          base: uint
          start: 7
          end: 8
          description: BUCK2 PWM OK status
          access: ReadOnly
          conversion:
            name: BUCK2PWMOK
            PWMMODEDISABLED:
              value: 0
              description: PWM mode disabled
            PWMMODEENABLED:
              value: 1
              description: PWM mode enabled

GPIOS:
  type: block
  description: GPIOs registers
  address_offset: 0x0600
  objects:
    GPIOMODE:
      type: register
      description: GPIO Mode Configuration
      address: 0x00
      repeat:
        count: 5
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        GPIOMODE:
          base: uint
          start: 0
          end: 4
          description: Config for GPIO mode selection
          try_conversion: crate::gpios::GpioMode
    GPIODRIVE:
      type: register
      description: GPIO Drive strength Configuration
      address: 0x05
      repeat:
        count: 5
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        GPIODRIVE:
          base: uint
          start: 0
          end: 1
          description: Config for GPIO drive strength
          conversion:
            name: GPIODRIVESTRENGTH
            DRIVE_1MA:
              value: default
              description: 1mA drive strength
            DRIVE_6MA:
              value: 1
              description: 6mA drive strength
    GPIOPUEN:
      type: register
      description: GPIO pull-up enable configuration
      address: 0x0A
      repeat:
        count: 5
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        GPIOPUEN:
          base: uint
          start: 0
          end: 1
          description: Config for GPIO pull-up enable
          conversion:
            name: GPIOPUENABLE
            PULLUP0:
              value: default
              description: Pull-up disable
            PULLUP1:
              value: 1
              description: Pull-up enable
    GPIOPDEN:
      type: register
      description: GPIO pull-down enable configuration
      address: 0x0F
      repeat:
        count: 5
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        GPIOPDEN:
          base: uint
          start: 0
          end: 1
          description: Config for GPIO pull-down enable
          conversion:
            name: GPIOPDENABLE
            PULLDOWN0:
              value: default
              description: Pull-down disable
            PULLDOWN1:
              value: 1
              description: Pull-down enable
    GPIOOPENDRAIN:
      type: register
      description: GPIO open drain configuration
      address: 0x14
      repeat:
        count: 5
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        GPIOOPENDRAIN:
          base: uint
          start: 0
          end: 1
          description: Config for GPIO open drain
          conversion:
            name: GPIOOPENDRAINCONFIG
            OPENDRAIN0:
              value: default
              description: Open drain disable
            OPENDRAIN1:
              value: 1
              description: Open drain enable
    GPIODEBOUNCE:
      type: register
      description: GPIO debounce configuration
      address: 0x19
      repeat:
        count: 5
        stride: 1
      size_bits: 8
      reset_value: 0x00
      fields:
        GPIODEBOUNCE:
          base: uint
          start: 0
          end: 1
          description: Config for GPIO debounce
          conversion:
            name: GPIODEBOUNCECONFIG
            DEBOUNCE0:
              value: default
              description: Debounce disable
            DEBOUNCE1:
              value: 1
              description: Debounce enable
    GPIOSTATUS:
      type: register
      description: GPIO Status from GPIO Pads
      address: 0x1E
      size_bits: 8
      reset_value: 0x00
      access: ReadOnly
      fields:
        GPIO0STATUS:
          base: uint
          start: 0
          end: 1
          description: GPIO0 status
          access: ReadOnly
          try_conversion: crate::gpios::GpioStatus
        GPIO1STATUS:
          base: uint
          start: 1
          end: 2
          description: GPIO1 status
          access: ReadOnly
          try_conversion: crate::gpios::GpioStatus
        GPIO2STATUS:
          base: uint
          start: 2
          end: 3
          description: GPIO2 status
          access: ReadOnly
          try_conversion: crate::gpios::GpioStatus
        GPIO3STATUS:
          base: uint
          start: 3
          end: 4
          description: GPIO3 status
          access: ReadOnly
          try_conversion: crate::gpios::GpioStatus
        GPIO4STATUS:
          base: uint
          start: 4
          end: 5
          description: GPIO4 status
          access: ReadOnly
          try_conversion: crate::gpios::GpioStatus
